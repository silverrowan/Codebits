/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var P=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var J=Object.prototype.hasOwnProperty;var K=(s,t,a)=>t in s?P(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var Q=(s,t)=>{for(var a in t)P(s,a,{get:t[a],enumerable:!0})},X=(s,t,a,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of B(t))!J.call(s,l)&&l!==a&&P(s,l,{get:()=>t[l],enumerable:!(n=_(t,l))||n.enumerable});return s};var Y=s=>X(P({},"__esModule",{value:!0}),s);var m=(s,t,a)=>(K(s,typeof t!="symbol"?t+"":t,a),a);var at={};Q(at,{default:()=>E});module.exports=Y(at);var C=require("obsidian");var V={collapsed:"Collapsed by default",expanded:"Expanded by default",removeCollapsing:"Remove collapsing",calloutType:"Callout type",calloutTypePlaceholder:"Callout type...",addMetadata:"Add callout metadata",removeMetadata:"Remove callout metadata",clearFormatting:"Clear formatting",calloutTypes:"Callout types",calloutTypesDesc:"Write a list of callout types (separated by commas) that should appear in context menu.",metadataTypes:"Callout metadata types",metadataTypesDesc:"Write a list of callout metadata types (separated by commas) that should appear in context menu.",copyContent:"Copy callout content",copyLinkPath:"Copy link path",other:"Other..."};var z={collapsed:"\u0421\u0432\u0451\u0440\u043D\u0443\u0442\u044B\u0439 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",expanded:"\u0420\u0430\u0437\u0432\u0451\u0440\u043D\u0443\u0442\u044B\u0439 \u043F\u043E \u0443\u043C\u043E\u043B\u0447\u0430\u043D\u0438\u044E",removeCollapsing:"\u0423\u0431\u0440\u0430\u0442\u044C \u0441\u0432\u043E\u0440\u0430\u0447\u0438\u0432\u0430\u043D\u0438\u0435",calloutType:"\u0422\u0438\u043F \u0432\u044B\u043D\u043E\u0441\u043D\u043E\u0433\u043E \u0431\u043B\u043E\u043A\u0430",calloutTypePlaceholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0438\u043F \u0432\u044B\u043D\u043E\u0441\u043D\u043E\u0433\u043E \u0431\u043B\u043E\u043A\u0430...",addMetadata:"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043C\u0435\u0442\u0430\u0434\u0430\u043D\u043D\u044B\u0435",removeMetadata:"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u043C\u0435\u0442\u0430\u0434\u0430\u043D\u043D\u044B\u0435",clearFormatting:"\u041E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u0444\u043E\u0440\u043C\u0430\u0442\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u0435",calloutTypes:"\u0422\u0438\u043F\u044B \u0432\u044B\u043D\u043E\u0441\u043D\u044B\u0445 \u0431\u043B\u043E\u043A\u043E\u0432",calloutTypesDesc:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043F\u0438\u0441\u043E\u043A \u0442\u0438\u043F\u043E\u0432 \u0432\u044B\u043D\u043E\u0441\u043D\u044B\u0445 \u0431\u043B\u043E\u043A\u043E\u0432, \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u0431\u0443\u0434\u0443\u0442 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u044C\u0441\u044F \u0432 \u043A\u043E\u043D\u0442\u0435\u043A\u0441\u0442\u043D\u043E\u043C \u043C\u0435\u043D\u044E (\u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043F\u044F\u0442\u0443\u044E).",metadataTypes:"\u0422\u0438\u043F\u044B \u043C\u0435\u0442\u0430\u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u0432\u044B\u043D\u043E\u0441\u043D\u044B\u0445 \u0431\u043B\u043E\u043A\u043E\u0432",metadataTypesDesc:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043F\u0438\u0441\u043E\u043A \u0442\u0438\u043F\u043E\u0432 \u043C\u0435\u0442\u0430\u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u0432\u044B\u043D\u043E\u0441\u043D\u044B\u0445 \u0431\u043B\u043E\u043A\u043E\u0432, \u043A\u043E\u0442\u043E\u0440\u044B\u0435 \u0431\u0443\u0434\u0443\u0442 \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0442\u044C\u0441\u044F \u0432 \u043A\u043E\u043D\u0442\u0435\u043A\u0441\u0442\u043D\u043E\u043C \u043C\u0435\u043D\u044E (\u0447\u0435\u0440\u0435\u0437 \u0437\u0430\u043F\u044F\u0442\u0443\u044E).",copyContent:"\u0421\u043A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435",copyLinkPath:"\u041A\u043E\u043F\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0430\u0434\u0440\u0435\u0441 \u0441\u0441\u044B\u043B\u043A\u0438",other:"\u0414\u0440\u0443\u0433\u0438\u0435..."};var D={en:V,ru:z},A=class{constructor(){m(this,"currentLocale","en")}setLocale(t){D[t]&&(this.currentLocale=t)}t(t){return D[this.currentLocale][t]||D.en[t]||t}},c=new A;var k=require("obsidian");function q(s,t){let a=Object.keys(t).map(n=>Z(s,n,t[n]));return a.length===1?a[0]:function(){a.forEach(n=>n())}}function Z(s,t,a){let n=s[t],l=s.hasOwnProperty(t),r=l?n:function(){return Object.getPrototypeOf(s)[t].apply(this,arguments)},g=a(r);return n&&Object.setPrototypeOf(g,n),Object.setPrototypeOf(h,g),s[t]=h,M;function h(...S){return g===r&&s[t]===h&&M(),g.apply(this,S)}function M(){s[t]===h&&(l?s[t]=r:delete s[t]),g!==r&&(g=r,Object.setPrototypeOf(h,n||Function))}}function H(s,t,a){return n[s]=s,n;function n(...l){return(t[s]===s?t:a).apply(this,l)}}var R=require("obsidian");var v=class extends R.FuzzySuggestModal{constructor(a,n,l,r,g){super(a);m(this,"resolve");m(this,"reject");m(this,"values");m(this,"placeholder");this.resolve=n,this.reject=l,this.values=r,this.placeholder=g}getItems(){return this.values}getItemText(a){return this.setPlaceholder(this.placeholder),a}renderSuggestion(a,n){let l=a.item;n.createEl("div",{text:l})}onChooseItem(a){this.resolve(a)}};var $=async s=>{s.uninstallCalloutMenuPatch=q(k.Menu.prototype,{showAtMouseEvent(t){return H("pp-patch-menu-around-key",t,function(...a){let l=a[0].target,r=this;return l.closest(".cm-callout")&&et(s,r,l),t&&t.apply(r,a)})}})},tt=async(s,t)=>{let a=c.t("calloutTypePlaceholder");return new Promise((l,r)=>{new v(s.app,l,r,t,a).open()})},et=async(s,t,a)=>{var U;(U=t==null?void 0:t.dom)==null||U.classList.add("callout-menu"),delete t.submenuConfigs.type,t.items=t.items.filter(e=>e.section!="type");let n=a.closest(".cm-callout"),l=n.querySelector(".callout"),r=a.closest("a"),g=s.settings.types.split(",").map(e=>e.trim()),h=s.settings.metaTypes.split(",").map(e=>e.trim()),M=["note","info","important","tip","success","question","warning","example","quote","abstract","summary","tldr","todo","hint","check","done","question","faq","help","caution","attention","failure","fail","missing","danger","error","bug","example","cite"],S=l.classList,O=l.getAttribute("data-callout-fold"),N=n.cmView.widget,p=N.editor.editor,d=p.offsetToPos(N.start).line,G=p.offsetToPos(N.end).line,f=p.getLine(d),I=[];for(let e=d;e<=G;e++)I.push(e);let w=f.replace(/(.*?])(.*)/,"$1"),F=n.cmView.widget.getType().replace(/([^|]+)(.*)/,"$1"),W=[...h],L=h.filter(e=>w.includes("|"+e+"|")||w.includes("|"+e+"]")),x=W.filter(e=>!w.includes("|"+e+"|")&&!w.includes("|"+e+"]"));if(t.addItem(e=>e.setTitle(c.t("copyContent")).setSection("edit").onClick(()=>{I.shift();let o="";for(let i of I){let y=p.getLine(i).replace(">","");y=y.replace(/^ /,""),o+=y+`
`}o=o.trim(),navigator.clipboard.writeText(o)})),r&&r.className&&r.className.includes("internal-link")&&t.addItem(e=>e.setTitle(c.t("copyLinkPath")).setSection("clipboard").onClick(()=>{let o=r.getAttribute("data-href")||"";navigator.clipboard.writeText(o)})),S.contains("is-collapsible")&&O=="-"?(t.addItem(e=>{e.setTitle(c.t("expanded")).setIcon("plus").setSection("collapse").onClick(()=>{p.setLine(d,f.replace("]-","]+"))})}),t.addItem(e=>{e.setTitle(c.t("removeCollapsing")).setIcon("x").setSection("collapse").onClick(()=>{p.setLine(d,f.replace("]-","]"))})})):S.contains("is-collapsible")&&O=="+"?(t.addItem(e=>{e.setTitle(c.t("collapsed")).setIcon("minus").setSection("collapse").onClick(()=>{p.setLine(d,f.replace("]+","]-"))})}),t.addItem(e=>{e.setTitle(c.t("removeCollapsing")).setIcon("x").setSection("collapse").onClick(()=>{p.setLine(d,f.replace("]+","]"))})})):(t.addItem(e=>{e.setTitle(c.t("collapsed")).setIcon("minus").setSection("collapse").onClick(()=>{p.setLine(d,f.replace("]","]-"))})}),t.addItem(e=>{e.setTitle(c.t("expanded")).setIcon("plus").setSection("collapse").onClick(()=>{p.setLine(d,f.replace("]","]+"))})})),k.Platform.isMobile){for(let e of g){let o=e[0].toUpperCase()+e.slice(1,e.length).replace("|"," | ");t.addItem(i=>{i.setTitle(o).setSection("custom-type").onClick(()=>{n.cmView.widget.updateType(e)}).setChecked(F==e)})}if(t.addSeparator(),x.length>0)for(let e of x){let o=e[0].toUpperCase()+e.slice(1,e.length).replace("|"," | ");t.addItem(i=>{i.setTitle(o).setSection("custom-type-metadata").setIcon("plus").onClick(()=>{p.setLine(d,f.replace("]","|"+e+"]"))})})}if(L.length>0)for(let e of L){let o=e[0].toUpperCase()+e.slice(1,e.length).replace("|"," | ");t.addItem(i=>{i.setTitle(o).setSection("custom-type-metadata").setIcon("minus").onClick(()=>{p.setLine(d,f.replace("|"+e,""))})})}}else t.addItem(e=>{e.setTitle(c.t("calloutType")).setSection("custom-type");let o=e.setSubmenu();o.dom.classList.add("callout-menu");for(let i of g)o.addItem(u=>{let y=i[0].toUpperCase()+i.slice(1,i.length).replace("|"," | ");u.setTitle(y).onClick(()=>{n.cmView.widget.updateType(i)}).setChecked(F==i)});o.addItem(i=>{let u=c.t("other");i.setTitle(u).onClick(async()=>{let y=await tt(s,M);n.cmView.widget.updateType(y)})})}),x.length>0&&t.addItem(e=>{e.setTitle(c.t("addMetadata")).setSection("custom-type");let o=e.setSubmenu();o.dom.classList.add("callout-menu");for(let i of x)o.addItem(u=>{let y=i[0].toUpperCase()+i.slice(1,i.length).replace("|"," | ");u.setTitle(y).onClick(()=>{p.setLine(d,f.replace("]","|"+i+"]"))})})}),L.length>0&&t.addItem(e=>{e.setTitle(c.t("removeMetadata")).setSection("custom-type");let o=e.setSubmenu();o.dom.classList.add("callout-menu");for(let i of L)o.addItem(u=>{let y=i[0].toUpperCase()+i.slice(1,i.length).replace("|"," | ");u.setTitle(y).onClick(()=>{p.setLine(d,f.replace("|"+i,""))})})});t.addItem(e=>e.setTitle(c.t("clearFormatting")).setIcon("eraser").setSection("clear").onClick(()=>{for(let o of I){let u=p.getLine(o).replace(">","");o==d&&(u=u.replace("]+","]").replace("]-","]").replace(/(\[.*?\])(.*)/,"$2").replace(/^ /,"")),u=u.replace(/^ /,""),p.setLine(o,u)}}))};var T=require("obsidian");var j={types:"note, info, tip",metaTypes:"no-icon, no-title"},b=class extends T.PluginSettingTab{constructor(a,n){super(a,n);m(this,"plugin");this.plugin=n}display(){let{containerEl:a}=this;a.empty(),new T.Setting(a).setName(c.t("calloutTypes")).setDesc(c.t("calloutTypesDesc")).addTextArea(n=>n.setValue(this.plugin.settings.types).onChange(async l=>{this.plugin.settings.types=l,await this.plugin.saveSettings()})),new T.Setting(a).setName(c.t("metadataTypes")).setDesc(c.t("metadataTypesDesc")).addTextArea(n=>n.setValue(this.plugin.settings.metaTypes).onChange(async l=>{this.plugin.settings.metaTypes=l,await this.plugin.saveSettings()}))}};var E=class extends C.Plugin{constructor(){super(...arguments);m(this,"settings");m(this,"uninstallCalloutMenuPatch")}async onload(){let a="en";C.getLanguage?a=(0,C.getLanguage)():a=window.localStorage.language,c.setLocale(a),await this.loadSettings(),$(this),this.addSettingTab(new b(this.app,this))}onunload(){this.uninstallCalloutMenuPatch()}async loadSettings(){this.settings=Object.assign({},j,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};

/* nosourcemap */